{"version":3,"sources":["meteor://ðŸ’»app/client/accounts/AccountSettings.js","meteor://ðŸ’»app/client/layouts/HomeLayout.js","meteor://ðŸ’»app/client/rings/BrowseRings.js","meteor://ðŸ’»app/client/rings/NewRing.js","meteor://ðŸ’»app/client/rings/RingInfo.js","meteor://ðŸ’»app/client/rings/RingSingle.js","meteor://ðŸ’»app/client/rings/Rings.js","meteor://ðŸ’»app/lib/routes.js","meteor://ðŸ’»app/collections/Rings.js","meteor://ðŸ’»app/collections/Users.js"],"names":["Template","AccountSettings","events","event","preventDefault","console","log","oldPass","target","oldPassword","value","newPass","newPassword","newPass2","newPassword2","Accounts","changePassword","error","reason","newUsername","changeUsername","Meteor","userID","helpers","user","Session","set","isClient","Dashboard","logout","Register","emailVar","registerEmail","passwordVar","registerPassword","createUser","email","password","Login","loginEmail","loginPassword","loginWithPassword","FlowRouter","go","HomeLayout","register","get","BrowseRings","onCreated","self","autorun","subscribe","rings","Rings","find","NewRing","RingInfo","editMode","ReactiveVar","call","_id","isPrivate","template","updateRingId","instance","RingSingle","id","getParam","ring","findOne","onLogin","onLogout","route","name","action","BlazeLayout","render","userId","main","Mongo","Collection","allow","insert","doc","update","Tags","SimpleSchema","type","String","RingSchema","label","desc","tags","Boolean","defaultValue","optional","autoform","createdBy","autoValue","createdAt","Date","methods","togglePrivate","currentState","$set","togglePublic","deleteRing","remove","attachSchema","User","username","emails","Array","Object","regEx","RegEx","Email","services","blackbox","users"],"mappings":"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","file":"/app.js","sourcesContent":["Template.AccountSettings.events({\r\n    'click .changePassword': function(event){\r\n        event.preventDefault();\r\n        console.log(event);\r\n        var oldPass = event.target.oldPassword.value;\r\n        var newPass = event.target.newPassword.value;\r\n        var newPass2 = event.target.newPassword2.value;\r\n        Accounts.changePassword(oldPass, newPass, function(error){\r\n          if (error) {\r\n            console.log(\"ERROR\" + error.reason);\r\n          }\r\n          else{\r\n            console.log(\"Password Changed\");\r\n          }\r\n        });\r\n    },\r\n    'click .changeUsername': function(event){\r\n      event.preventDefault();\r\n      var newUsername = event.target.changeUsername.value;\r\n      Accounts.changeUsername(Meteor.userID(), newUsername);\r\n    }\r\n});\r\n\r\nTemplate.AccountSettings.helpers({\r\n  user: function() {\r\n    return Meteor.user();\r\n  }\r\n});\r\n\r\nTemplate.AccountSettings.events({\r\n    'click .fa-close': function() {\r\n        Session.set('changeSettings', false);\r\n    }\r\n});\r\n\r\nTemplate.AccountSettings.events({\r\n    'click .change-settings': () => {\r\n        Session.set('changeSettings', true);\r\n    }\r\n})\r\n\r\n\r\n//for login.html and register.html\r\n\r\n//make sure the code is not running on server\r\nif (Meteor.isClient) {\r\n  Template.Dashboard.events({\r\n    'click .logout': function(event){\r\n        event.preventDefault();\r\n        Meteor.logout();\r\n    }\r\n  });\r\n  Template.Register.events({\r\n    'submit form': function(event){\r\n        event.preventDefault();\r\n        var emailVar = event.target.registerEmail.value;\r\n        var passwordVar = event.target.registerPassword.value;\r\n        Accounts.createUser({\r\n            email: emailVar,\r\n            password: passwordVar\r\n        });\r\n    }\r\n  });\r\n  Template.Login.events({\r\n    'submit form': function(event){\r\n        event.preventDefault();\r\n        var emailVar = event.target.loginEmail.value;\r\n        var passwordVar = event.target.loginPassword.value;\r\n        Meteor.loginWithPassword(emailVar, passwordVar);\r\n        FlowRouter.go('dashboard');\r\n    }\r\n  });\r\n}\r\n","Template.HomeLayout.events({\r\n    'click .register': function() {\r\n        FlowRouter.go('Register')\r\n        console.log(\"clicked register button\")\r\n\r\n    }\r\n});\r\n\r\nTemplate.HomeLayout.helpers({\r\n  register:function(){\r\n    if(Session.get('register')==null){\r\n      return false;\r\n    }else{\r\n    return Session.get('register');\r\n  }\r\n  }\r\n});\r\n","Template.BrowseRings.onCreated(function(){\r\n    var self = this;\r\n    self.autorun(function (){\r\n        self.subscribe('rings');\r\n    });\r\n});\r\n\r\nTemplate.BrowseRings.helpers({\r\n    rings: ()=> {\r\n        return Rings.find({});\r\n    }\r\n});","Template.NewRing.events({\r\n    'click .fa-close': function() {\r\n        Session.set('newRing', false);\r\n    }\r\n});","Template.RingInfo.onCreated(function(){\r\n    this.editMode = new ReactiveVar(false);\r\n});\r\n\r\n\r\nTemplate.RingInfo.events({\r\n    'click .set-private': function() {\r\n        Meteor.call('togglePrivate', this._id, this.isPrivate);\r\n    },\r\n    'click .set-public': function() {\r\n        Meteor.call('togglePublic', this._id, this.isPrivate);\r\n    },\r\n    'click .fa-trash': function() {\r\n        Meteor.call('deleteRing', this._id);\r\n    },\r\n    'click .fa-pencil': function(event, template) {\r\n        template.editMode.set(!template.editMode.get());\r\n    }\r\n});\r\n\r\nTemplate.RingInfo.helpers({\r\n    updateRingId: function() {\r\n        return this._id;\r\n    },\r\n    editMode: function() {\r\n        return Template.instance().editMode.get();\r\n    }\r\n});","Template.RingSingle.onCreated(function(){\r\n    var self = this;\r\n    self.autorun(function (){\r\n        var id = FlowRouter.getParam('id');\r\n        self.subscribe('singleRing', id);\r\n    });\r\n});\r\n\r\nTemplate.RingSingle.helpers({\r\n    ring: ()=> {\r\n        var id = FlowRouter.getParam('id');\r\n        return Rings.findOne({_id: id});\r\n    }\r\n});","Template.Rings.events({\r\n    'click .new-ring': () => {\r\n        Session.set('newRing', true);\r\n    }\r\n})","if(Meteor.isClient){\r\n    Accounts.onLogin(function(){\r\n        FlowRouter.go('dashboard');\r\n    });\r\n\r\n    Accounts.onLogout(function(){\r\n        FlowRouter.go('home');\r\n    });\r\n}\r\n\r\n// FlowRouter.triggers.enter([function(context, redirect){\r\n//     if(!Meteor.userId()){\r\n//         FlowRouter.go('home');\r\n//     }\r\n// }]);\r\n\r\nFlowRouter.route('/register',{\r\n  name: 'Register',\r\n  action() {\r\n    BlazeLayout.render('Register');\r\n  }\r\n});\r\n\r\nFlowRouter.route('/login', {\r\n  name: 'Login',\r\n  action() {\r\n    BlazeLayout.render('Login');\r\n  }\r\n});\r\n\r\nFlowRouter.route('/', {\r\n    name: 'home',\r\n    action() {\r\n        if(Meteor.userId()){\r\n            FlowRouter.go('dashboard');\r\n        }\r\n        BlazeLayout.render('HomeLayout');\r\n    }\r\n});\r\n\r\nFlowRouter.route('/dashboard', {\r\n    name: 'dashboard',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'Dashboard'});\r\n    }\r\n});\r\n\r\n\r\nFlowRouter.route('/rings', {\r\n    name: 'rings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'Rings'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/browse-rings', {\r\n    name: 'browse-rings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'BrowseRings'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/rings/:id', {\r\n    name: 'ring-single',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'RingSingle'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/account', {\r\n    name: 'account-settings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'AccountSettings'});\r\n    }\r\n});\r\n","Rings = new Mongo.Collection('rings');\r\n\r\nRings.allow({\r\n    insert: function(userId, doc){\r\n        return !!userId;\r\n    },\r\n    update: function(userId, doc) {\r\n        return !!userId;\r\n    }\r\n});\r\n\r\nTags = new SimpleSchema({\r\n    name: {\r\n        type: String\r\n    }\r\n});\r\n\r\nRingSchema = new SimpleSchema({\r\n    name: {\r\n        type: String,\r\n        label: \"Name\"\r\n    },\r\n    desc: {\r\n        type: String,\r\n        label: \"Description\"\r\n    },\r\n    tags: {\r\n        type: [Tags]\r\n    },\r\n    isPrivate: {\r\n        type: Boolean,\r\n        defaultValue: false,\r\n        optional: true,\r\n        autoform:{\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n    createdBy:{\r\n        type: String,\r\n        label: \"Created By\",\r\n        autoValue: function () {\r\n            return this.userId\r\n        },\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        label: \"Created At\",\r\n        autoValue: function() {\r\n            return new Date()\r\n        },\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    }\r\n});\r\n\r\nMeteor.methods({\r\n    togglePrivate: function(id, currentState) {\r\n        Rings.update(id, {\r\n            $set: {\r\n                isPrivate: true\r\n            }\r\n        });\r\n    },\r\n    togglePublic: function(id, currentState) {\r\n        Rings.update(id, {\r\n            $set: {\r\n                isPrivate: false\r\n            }\r\n        });\r\n    },\r\n    deleteRing: function(id) {\r\n        Rings.remove(id);\r\n    }\r\n});\r\n\r\nRings.attachSchema( RingSchema );\r\n\r\n","User = new SimpleSchema({\r\n    username: {\r\n        type: String,\r\n        // For accounts-password, either emails or username is required, but not both. It is OK to make this\r\n        // optional here because the accounts-password package does its own validation.\r\n        // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\r\n        optional: true\r\n    },\r\n    emails: {\r\n        type: Array,\r\n        // For accounts-password, either emails or username is required, but not both. It is OK to make this\r\n        // optional here because the accounts-password package does its own validation.\r\n        // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\r\n        optional: true\r\n    },\r\n    \"emails.$\": {\r\n        type: Object\r\n    },\r\n    \"emails.$.address\": {\r\n        type: String,\r\n        regEx: SimpleSchema.RegEx.Email\r\n    },\r\n    // Make sure this services field is in your schema if you're using any of the accounts packages\r\n    services: {\r\n        type: Object,\r\n        optional: true,\r\n        blackbox: true,\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n});\r\n\r\nMeteor.users.attachSchema( User );"]}