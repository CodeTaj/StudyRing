{"version":3,"sources":["meteor://ðŸ’»app/client/accounts/AccountSettings.js","meteor://ðŸ’»app/client/layouts/HomeLayout.js","meteor://ðŸ’»app/client/rings/BrowseRings.js","meteor://ðŸ’»app/client/rings/NewRing.js","meteor://ðŸ’»app/client/rings/RingInfo.js","meteor://ðŸ’»app/client/rings/RingSingle.js","meteor://ðŸ’»app/client/rings/Rings.js","meteor://ðŸ’»app/lib/routes.js","meteor://ðŸ’»app/collections/Rings.js","meteor://ðŸ’»app/collections/Users.js"],"names":["Template","AccountSettings","events","event","preventDefault","console","log","oldPass","target","oldPassword","value","newPass","newPassword","newPass2","newPassword2","Accounts","changePassword","error","reason","newUsername","changeUsername","Meteor","userID","helpers","user","Session","set","isClient","dashboard","logout","register","emailVar","registerEmail","passwordVar","registerPassword","createUser","email","password","login","loginEmail","loginPassword","loginWithPassword","FlowRouter","go","HomeLayout","BrowseRings","onCreated","self","autorun","subscribe","rings","Rings","find","NewRing","RingInfo","editMode","ReactiveVar","call","_id","isPrivate","template","get","updateRingId","instance","RingSingle","id","getParam","ring","findOne","onLogin","onLogout","triggers","enter","context","redirect","userId","route","name","action","BlazeLayout","render","main","Mongo","Collection","allow","insert","doc","update","Tags","SimpleSchema","type","String","RingSchema","label","desc","tags","Boolean","defaultValue","optional","autoform","createdBy","autoValue","createdAt","Date","methods","togglePrivate","currentState","$set","togglePublic","deleteRing","remove","attachSchema","User","username","emails","Array","Object","regEx","RegEx","Email","services","blackbox","users"],"mappings":"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","file":"/app.js","sourcesContent":["Template.AccountSettings.events({\r\n    'click .changePassword': function(event){\r\n        event.preventDefault();\r\n        console.log(event);\r\n        var oldPass = event.target.oldPassword.value;\r\n        var newPass = event.target.newPassword.value;\r\n        var newPass2 = event.target.newPassword2.value;\r\n        Accounts.changePassword(oldPass, newPass, function(error){\r\n          if (error) {\r\n            console.log(\"ERROR\" + error.reason);\r\n          }\r\n          else{\r\n            console.log(\"Password Changed\");\r\n          }\r\n        });\r\n    },\r\n    'click .changeUsername': function(event){\r\n      event.preventDefault();\r\n      var newUsername = event.target.changeUsername.value;\r\n      Accounts.changeUsername(Meteor.userID(), newUsername);\r\n    }\r\n});\r\n\r\nTemplate.AccountSettings.helpers({\r\n  user: function() {\r\n    return Meteor.user();\r\n  }\r\n});\r\n\r\nTemplate.AccountSettings.events({\r\n    'click .fa-close': function() {\r\n        Session.set('changeSettings', false);\r\n    }\r\n});\r\n\r\nTemplate.AccountSettings.events({\r\n    'click .change-settings': () => {\r\n        Session.set('changeSettings', true);\r\n    }\r\n})\r\n\r\n\r\n//for login.html and register.html\r\n\r\n//make sure the code is not running on server\r\nif (Meteor.isClient) {\r\n  Template.dashboard.events({\r\n    'click .logout': function(event){\r\n        event.preventDefault();\r\n        Meteor.logout();\r\n    }\r\n  });\r\n  Template.register.events({\r\n    'submit form': function(event){\r\n        event.preventDefault();\r\n        var emailVar = event.target.registerEmail.value;\r\n        var passwordVar = event.target.registerPassword.value;\r\n        Accounts.createUser({\r\n            email: emailVar,\r\n            password: passwordVar\r\n        });\r\n    }\r\n  });\r\n  Template.login.events({\r\n    'submit form': function(event){\r\n        event.preventDefault();\r\n        var emailVar = event.target.loginEmail.value;\r\n        var passwordVar = event.target.loginPassword.value;\r\n        Meteor.loginWithPassword(emailVar, passwordVar);\r\n        FlowRouter.go('dashboard');\r\n    }\r\n  });\r\n}\r\n","Template.HomeLayout.events({\r\n    'click .register': function() {\r\n        Session.set('register', true);\r\n    }\r\n});","Template.BrowseRings.onCreated(function(){\r\n    var self = this;\r\n    self.autorun(function (){\r\n        self.subscribe('rings');\r\n    });\r\n});\r\n\r\nTemplate.BrowseRings.helpers({\r\n    rings: ()=> {\r\n        return Rings.find({});\r\n    }\r\n});","Template.NewRing.events({\r\n    'click .fa-close': function() {\r\n        Session.set('newRing', false);\r\n    }\r\n});","Template.RingInfo.onCreated(function(){\r\n    this.editMode = new ReactiveVar(false);\r\n});\r\n\r\n\r\nTemplate.RingInfo.events({\r\n    'click .set-private': function() {\r\n        Meteor.call('togglePrivate', this._id, this.isPrivate);\r\n    },\r\n    'click .set-public': function() {\r\n        Meteor.call('togglePublic', this._id, this.isPrivate);\r\n    },\r\n    'click .fa-trash': function() {\r\n        Meteor.call('deleteRing', this._id);\r\n    },\r\n    'click .fa-pencil': function(event, template) {\r\n        template.editMode.set(!template.editMode.get());\r\n    }\r\n});\r\n\r\nTemplate.RingInfo.helpers({\r\n    updateRingId: function() {\r\n        return this._id;\r\n    },\r\n    editMode: function() {\r\n        return Template.instance().editMode.get();\r\n    }\r\n});","Template.RingSingle.onCreated(function(){\r\n    var self = this;\r\n    self.autorun(function (){\r\n        var id = FlowRouter.getParam('id');\r\n        self.subscribe('singleRing', id);\r\n    });\r\n});\r\n\r\nTemplate.RingSingle.helpers({\r\n    ring: ()=> {\r\n        var id = FlowRouter.getParam('id');\r\n        return Rings.findOne({_id: id});\r\n    }\r\n});","Template.Rings.events({\r\n    'click .new-ring': () => {\r\n        Session.set('newRing', true);\r\n    }\r\n})","if(Meteor.isClient){\r\n    Accounts.onLogin(function(){\r\n        FlowRouter.go('dashboard');\r\n    });\r\n\r\n    Accounts.onLogout(function(){\r\n        FlowRouter.go('home');\r\n    });\r\n}\r\n\r\nFlowRouter.triggers.enter([function(context, redirect){\r\n    if(!Meteor.userId()){\r\n        FlowRouter.go('home');\r\n    }\r\n}]);\r\n// FlowRouter.route('/register',{\r\n//   name: 'registration',\r\n//   action( {\r\n//     BlazeLayout.render('Register');\r\n//   })\r\n// })\r\n\r\nFlowRouter.route('/', {\r\n    name: 'home',\r\n    action() {\r\n        if(Meteor.userId()){\r\n            FlowRouter.go('dashboard');\r\n        }\r\n        BlazeLayout.render('HomeLayout');\r\n    }\r\n});\r\n\r\nFlowRouter.route('/dashboard', {\r\n    name: 'dashboard',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'Dashboard'});\r\n    }\r\n});\r\n\r\n\r\nFlowRouter.route('/rings', {\r\n    name: 'rings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'Rings'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/browse-rings', {\r\n    name: 'browse-rings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'BrowseRings'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/rings/:id', {\r\n    name: 'ring-single',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'RingSingle'});\r\n    }\r\n});\r\n\r\nFlowRouter.route('/account', {\r\n    name: 'account-settings',\r\n    action() {\r\n        BlazeLayout.render('MainLayout', {main:'AccountSettings'});\r\n    }\r\n});\r\n","Rings = new Mongo.Collection('rings');\r\n\r\nRings.allow({\r\n    insert: function(userId, doc){\r\n        return !!userId;\r\n    },\r\n    update: function(userId, doc) {\r\n        return !!userId;\r\n    }\r\n});\r\n\r\nTags = new SimpleSchema({\r\n    name: {\r\n        type: String\r\n    }\r\n});\r\n\r\nRingSchema = new SimpleSchema({\r\n    name: {\r\n        type: String,\r\n        label: \"Name\"\r\n    },\r\n    desc: {\r\n        type: String,\r\n        label: \"Description\"\r\n    },\r\n    tags: {\r\n        type: [Tags]\r\n    },\r\n    isPrivate: {\r\n        type: Boolean,\r\n        defaultValue: false,\r\n        optional: true,\r\n        autoform:{\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n    createdBy:{\r\n        type: String,\r\n        label: \"Created By\",\r\n        autoValue: function () {\r\n            return this.userId\r\n        },\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n    createdAt: {\r\n        type: Date,\r\n        label: \"Created At\",\r\n        autoValue: function() {\r\n            return new Date()\r\n        },\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    }\r\n});\r\n\r\nMeteor.methods({\r\n    togglePrivate: function(id, currentState) {\r\n        Rings.update(id, {\r\n            $set: {\r\n                isPrivate: true\r\n            }\r\n        });\r\n    },\r\n    togglePublic: function(id, currentState) {\r\n        Rings.update(id, {\r\n            $set: {\r\n                isPrivate: false\r\n            }\r\n        });\r\n    },\r\n    deleteRing: function(id) {\r\n        Rings.remove(id);\r\n    }\r\n});\r\n\r\nRings.attachSchema( RingSchema );\r\n\r\n","User = new SimpleSchema({\r\n    username: {\r\n        type: String,\r\n        // For accounts-password, either emails or username is required, but not both. It is OK to make this\r\n        // optional here because the accounts-password package does its own validation.\r\n        // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\r\n        optional: true\r\n    },\r\n    emails: {\r\n        type: Array,\r\n        // For accounts-password, either emails or username is required, but not both. It is OK to make this\r\n        // optional here because the accounts-password package does its own validation.\r\n        // Third-party login packages may not require either. Adjust this schema as necessary for your usage.\r\n        optional: true\r\n    },\r\n    \"emails.$\": {\r\n        type: Object\r\n    },\r\n    \"emails.$.address\": {\r\n        type: String,\r\n        regEx: SimpleSchema.RegEx.Email\r\n    },\r\n    // Make sure this services field is in your schema if you're using any of the accounts packages\r\n    services: {\r\n        type: Object,\r\n        optional: true,\r\n        blackbox: true,\r\n        autoform: {\r\n            type: \"hidden\"\r\n        }\r\n    },\r\n});\r\n\r\nMeteor.users.attachSchema( User );"]}