<template name="Rings">
{{#if $.Session.get 'newRing'}}
        {{> NewRing}}
{{else}}
    <button class="new-ring">New Ring</button>
{{/if}}
{{#if Template.subscriptionsReady}}
    {{#each rings}}
        {{#if isOwner createdBy}}
          {{> RingInfo}}
        {{/if}}
    {{/each}}
{{else}}
    <p>Loading</p>
{{/if}}
</template>

<template name="RingInfo">
    <article class="ring {{#if isPrivate}}is-private{{/if}}">
        <h3>
            Name: {{name}}
        </h3>
        {{#if editMode}}
                {{> quickForm collection="Rings" id=updateRingId type="update" doc=this autosave=true}}
                {{#if isPrivate}}
                    <button class="btn-primary set-public">Set Public</button>
                {{else}}
                    <button class="btn-deny set-private">Set Private</button>
                {{/if}}
            {{else}}
            <p>
                Description: {{desc}}
            </p>
            <p>
                Tags:
                {{#each tags}}
                    <span class="tags">{{name}}</span>
                {{/each}}
            </p>
            <p>
                Created By: {{user.username}} {{> avatar userId=userId shape="circle" size="medium"}}
            </p>
            <a href="/rings/{{_id}}">View Details</a>
        {{/if}}
        <i class="fa fa-pencil"></i>
        <i class="fa fa-trash"></i>
    </article>
</template>

<template name="RingSingle">
    <article class="ring">
        <h3>
            Name: {{name}}
        </h3>
        <p>
            Description: {{desc}}
        </p>
        <p>
            Tags:
            {{#each tags}}
                <span class="tags">{{name}}</span>
            {{/each}}
        </p>
        <p>
            Members:
            {{#each members}}
                <span class="names">{{username}}
                                    {{> avatar userId=_id shape="circle" size="medium"}}
                </span>
            {{/each}}
        </p>
        {{#if isMember}}
            <button class="btn-deny leave-ring">Leave Ring</button>
        {{else}}
            <button class="btn-primary join-ring">Join Ring</button>
        {{/if}}
    </article>
</template>


<!--Ring Dashboard will contain future features such as an organized display of
    events, members, forum or communication between members and other information-->

<template name="RingDash">
    <h3>
    {{rings.name}}
    </h3>
    <br/>
        Description: {{rings.desc}}
    <br/>
        Tags:
        {{#each tags}}
            <span class="tags">{{name}}</span>
        {{/each}}
    <br/>

        Created By: {{user.username}} {{> avatar userId=userId shape="circle" size="medium"}}
        {{> NewEvent}}
</template>
