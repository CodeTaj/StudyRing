<template name="Rings">
{{#if $.Session.get 'newRing'}}
        {{> NewRing}}
{{else}}
    <button class="new-ring">New Ring</button>
{{/if}}
{{#if Template.subscriptionsReady}}
    {{#each rings}}
        {{#if isOwner createdBy}}
          {{> RingInfo}}
        {{/if}}
    {{/each}}
{{else}}
    <p>Loading</p>
{{/if}}
</template>

<template name="RingInfo">
    <article class="ring {{#if isPrivate}}is-private{{/if}}">
        <h3>
            Name: {{name}}
        </h3>
        {{#if editMode}}
                {{> quickForm collection=Rings id=updateRingId type="update" doc=this autosave=true}}
                {{#if isPrivate}}
                    <button class="btn-primary set-public">Set Public</button>
                {{else}}
                    <button class="btn-deny set-private">Set Private</button>

                {{/if}}
            {{else}}
            <p>
                Description: {{desc}}
            </p>
            <p>
                Tags:
                {{#each tags}}
                    <span class="tags">{{name}}</span>
                {{/each}}
            </p>
            <p>
                Created By: {{user.username}} {{> avatar userId=userId shape="circle" size="medium"}}
            </p>
            <a href="/rings/{{_id}}">View Details</a>

            {{#if isMember}}
                <button class="btn-deny leave-ring">Leave Ring</button>
            {{else}}
                <button class="btn-primary join-ring">Join Ring</button>
            {{/if}}
        {{/if}}

        <!--Checks if this is the ring owner, then displays options to delete or edit the ring-->
        {{#if isOwner createdBy}}
            <i class="fa fa-pencil"></i>
            <i class="fa fa-trash"></i>
        {{/if}}
    </article>
</template>

<template name="RingSetNipModal">
  <div class="modal fade">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">

        <div class="modal-header">
          <h4 class="modal-title">Nip add / edit</h4>
        </div>

        <form>

        <div class="modal-body">

            Nip:<input type="String" id="theNip" class="theNip" name="theNip">
            <button type="submit" class="btn btn-primary" id="save">Save</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        </div>

      </form>

      </div>
    </div>
  </div>
</template>
